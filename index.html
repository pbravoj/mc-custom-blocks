<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Motor BPP v5.2.0 - SDK Ready</title>
    <style>
        body { font-family: 'Inter', sans-serif; background: #f4f6f9; padding: 15px; font-size: 11px; }
        .section { background: white; padding: 12px; border-radius: 8px; margin-bottom: 10px; border: 1px solid #ddd; }
        h3 { margin: 0 0 10px 0; font-size: 10px; color: #0055aa; text-transform: uppercase; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        .readonly-monitor { background: #eef2f7; border: 1px dashed #0055aa; padding: 10px; border-radius: 6px; margin-top: 15px; }
        .readonly-monitor table { width: 100%; font-size: 9px; }
        .readonly-monitor td { padding: 2px 0; }
        .status-tag { color: #0055aa; font-weight: bold; }
    </style>
    <script src="https://developer.salesforce.com/docs/marketing/marketing-cloud/guide/assets/blocksdk.js"></script>
</head>
<body>

    <div class="section">
        <h3>Configuraci√≥n de Origen</h3>
        <select id="data_source_type" onchange="saveData()">
            <option value="parametric">Param√©trico (Config_DE)</option>
            <option value="recommended">Recomendado (Audiencia)</option>
            <option value="manual">Manual</option>
        </select>
    </div>

    <div class="section">
        <h3>Selecci√≥n de Slot (SKU_X)</h3>
        <div style="display:flex; justify-content:space-between;">
            <label><input type="radio" name="sku_slot" value="SKU_1" checked onclick="saveData()"> 1</label>
            <label><input type="radio" name="sku_slot" value="SKU_2" onclick="saveData()"> 2</label>
            <label><input type="radio" name="sku_slot" value="SKU_3" onclick="saveData()"> 3</label>
            <label><input type="radio" name="sku_slot" value="SKU_4" onclick="saveData()"> 4</label>
        </div>
    </div>

    <div class="readonly-monitor">
        <h3 style="color:#444; border-bottom:1px solid #ccc;">üîç Monitor de Mapeo (Read-Only)</h3>
        <table>
            <tr><td width="50%">Variable SDK:</td><td class="status-tag" id="mon_source">-</td></tr>
            <tr><td>Slot Seleccionado:</td><td class="status-tag" id="mon_slot">-</td></tr>
            <tr><td>Librer√≠a Tama√±o:</td><td class="status-tag" id="mon_size">-</td></tr>
            <tr><td>Versi√≥n Imagen:</td><td class="status-tag" id="mon_ver">-</td></tr>
            <tr><td>Estado Puente SDK:</td><td style="color:green; font-weight:bold;">CONECTADO</td></tr>
        </table>
    </div>

    <script>
        var sdk = new window.sfdc.BlockSDK();

        function saveData() {
            var data = {
                data_source_type: document.getElementById('data_source_type').value,
                sku_slot: document.querySelector('input[name="sku_slot"]:checked').value,
                sku_img_size: "h/",
                sku_img_version: "-1",
                img_format: "png",
                pop_out_offset: 55,
                sufijo1: "-1",
                sufijo2: "_C"
            };

            // Actualizar Monitor Visual (Read-Only)
            document.getElementById('mon_source').innerText = data.data_source_type;
            document.getElementById('mon_slot').innerText = data.sku_slot;
            document.getElementById('mon_size').innerText = data.sku_img_size;
            document.getElementById('mon_ver').innerText = data.sku_img_version;

            // Enviar a Salesforce
            sdk.setData(data, function (savedData) { console.log("Data sincronizada"); });
        }

        sdk.getData(function (data) {
            if (Object.keys(data).length > 0) { saveData(); }
        });
    </script>
</body>
</html>
